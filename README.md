# 📚 마이북스테이션 (My BookStation)

**도서 검색 및 도서관 재고 확인 서비스**

알라딘 API와 연동하여 도서를 검색하고, 여러 도서관의 재고 현황을 실시간으로 확인할 수 있는 웹 애플리케이션입니다. 개인 서재 관리 기능을 통해 관심 도서를 체계적으로 관리할 수 있습니다.

![React](https://img.shields.io/badge/React-61DAFB?style=flat-square&logo=react&logoColor=black)
![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=flat-square&logo=typescript&logoColor=white)
![Vite](https://img.shields.io/badge/Vite-646CFF?style=flat-square&logo=vite&logoColor=white)
![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=flat-square&logo=supabase&logoColor=white)
![Zustand](https://img.shields.io/badge/Zustand-000000?style=flat-square&logo=zustand&logoColor=white)
![Vercel](https://img.shields.io/badge/Vercel-000000?style=flat-square&logo=vercel&logoColor=white)
![Cloudflare Workers](https://img.shields.io/badge/Cloudflare_Workers-F38020?style=flat-square&logo=cloudflare&logoColor=white)

## 🎯 서비스 목표

- **원스톱 도서 서비스**: 검색부터 재고 확인, 개인 관리까지 한 곳에서
- **실시간 재고 확인**: 여러 도서관의 재고 상태를 동시에 확인
- **개인화된 서재 관리**: 독서 상태, 별점, 태그, 즐겨찾기 등 체계적인 도서 관리
- **편리한 접근성**: 직관적인 UI/UX로 누구나 쉽게 사용

## ✨ 주요 기능

### 📖 도서 검색
- **알라딘 API 연동**: 제목, 저자, 출판사별 검색 및 페이지네이션 지원
- **검색 결과 필터링**: '[세트]'로 시작하는 도서를 자동으로 제외하여 검색 결과의 정확성 향상
- **상세 정보 제공**: 도서 정보, 가격, ISBN, 전자책 유무, 알라딘 구매 링크 등 상세 정보 표시
- **키워드 통합 검색**: 단일 키워드로 여러 도서관의 소장 자료를 한 번에 검색하는 기능

### 📍 통합 도서 재고 확인
- **실시간 통합 조회**: 종이책(광주 시립도서관), 전자책(경기도 교육청 통합 도서관), 전자책(광주 시립도서관 구독형), 전자책(경기도 전자도서관 API) 재고를 한 번의 요청으로 동시에 확인
- **커스텀 검색어**: 기본 검색어로 조회가 어려운 도서의 경우, 사용자가 직접 검색어를 지정하여 조회 정확도 향상
- **정확도 높은 재고**: ISBN 필터링(경기도 전자도서관), "정보없음" 데이터 제외(광주 시립) 등 정확한 정보 제공
- **도서관 바로가기**: 재고 확인 셀 클릭 시, 해당 도서관의 도서 검색 결과 페이지로 바로 이동
- **재고 새로고침**: 클릭 한 번으로 최신 재고 상태 업데이트

#### 연동 도서관 목록
- **종이책**: 광주 중앙, 송정, 오포, 퇴촌 도서관 및 기타 시립도서관
- **전자책**: 경기도 교육청 통합전자도서관, 성남교육도서관
- **전자책**: 광주 시립도서관 구독형(교보문고) 및 소장형
- **전자책**: 경기도 전자도서관 (소장형+구독형 통합)

### 👤 개인 서재 관리
- **내 서재**: 관심 도서를 개인 서재에 저장 및 관리
- **독서 기록**: 읽음 상태(읽지 않음/읽는 중/완독) 및 별점(1-5점) 기록
- **🏷️ 커스텀 태그**: 사용자 정의 태그 생성/편집/삭제 및 태그 기반 필터링
- **❤️ 좋아하는 책**: 하트 아이콘으로 즐겨찾기 표시 및 필터링
- **📝 한 줄 메모**: 책별로 최대 50자의 간단한 메모 기록 및 수정
- **🔍 서버 기반 검색**: 페이지네이션과 무관하게 DB 전체를 대상으로 제목, 저자별 실시간 검색
- **다양한 정렬**: 추가순, 제목순, 저자순, 출간일순, 별점순, 읽음순 정렬
- **⚡ 페이지네이션**: 사용자 설정(25/50/100/200권)에 따라 초기 데이터를 부분 로딩하여 렌더링 성능 95% 개선
- **대량 작업**: 여러 책을 선택하여 태그 일괄 변경, 삭제 등 대량 작업 지원
- **일괄 재고 갱신**: 내 서재의 모든 책 재고 정보를 한 번에 업데이트 (일시정지/재개/취소 가능)
- **데이터 내보내기**: 서재 데이터를 CSV 파일로 내보내기 (파일명에 날짜 자동 포함)

### ⚙️ 맞춤 설정 시스템
- **표시 옵션**: 독서 상태, 별점, 태그, 메모, 도서관 재고, 좋아요 아이콘 표시 여부 설정
- **🌙 테마 시스템**: 다크/라이트/시스템 테마 선택
- **📱 모바일 최적화**: 반응형 디자인으로 모든 기기에서 최적화된 경험 제공
- **기본값 설정**: 관리자를 통한 신규 사용자 기본 설정값 관리

### 🔐 사용자 인증 및 계정 관리
- **Google 소셜 로그인**: 간편한 Google 계정 연동
- **이메일 회원가입/로그인**: 이메일과 비밀번호를 통한 인증
- **계정 관리**: 비밀번호 변경, 프로필 관리
- **안전한 회원탈퇴**: 2단계 확인 절차를 통한 계정 삭제 (Supabase Admin API 연동)

### 💬 사용자 피드백 시스템
- **의견 보내기**: 프로필 메뉴에서 간편한 피드백 전송
- **보안 강화**: Supabase Edge Function을 통해 안전하게 피드백 처리

### 👨‍💼 관리자 기능
- **관리자 전용 페이지**: 이메일 기반 권한 관리 시스템
- **주요 기능**: 대량 도서 조회, API 테스트 도구, 개발 노트, 신규 사용자 기본값 설정 등

## 🏗️ 기술 스택

### Frontend
- **React 19** & **TypeScript**
- **Vite**: 빠른 개발 서버 및 빌드
- **Tailwind CSS**: 유틸리티 우선 CSS 프레임워크
- **Lucide React**: 일관성 있는 아이콘 시스템

### State Management
- **Zustand**: 경량 상태 관리 (인증, 도서, UI, 설정별 분리)

### Backend & Database
- **Supabase**: PostgreSQL 데이터베이스, 인증, 실시간 동기화
- **Supabase Edge Functions**: 서버리스 로직 (피드백 처리)
- **Cloudflare Workers**: 도서관 재고 크롤링 및 키워드 검색 API
- **Vercel Serverless Functions**: Aladin API 프록시 처리

### Data Validation
- **Zod**: 런타임 타입 검증으로 외부 API 응답 안정성 확보

## 🚀 빠른 시작

### 필수 조건
- Node.js 18 이상
- Git

### 설치 및 실행
1.  **저장소 클론**
    ```bash
    git clone <repository-url>
    cd my_bookstation
    ```
2.  **의존성 설치**
    ```bash
    npm install
    ```
3.  **환경 변수 설정** (`.env.local` 파일 생성)
    ```bash
    VITE_SUPABASE_URL=your_supabase_url
    VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
    VITE_ALADIN_TTB_KEY=your_aladin_ttb_key
    ```
4.  **개발 서버 실행**
    ```bash
    npm run dev
    ```
5.  **브라우저에서 확인**: `http://localhost:5173`

## 🚀 최신 기술적 개선사항

### 커스텀 검색어 및 URL 중앙화 (2025-10-14)
- **🎯 조회 정확도 향상**: 사용자가 직접 도서관 검색어를 지정하는 '커스텀 검색어' 기능 추가.
- **🛠️ 유지보수성 개선**: 여러 컴포넌트에 흩어져 있던 도서관 바로가기 URL 생성 로직을 `createLibraryOpenURL` 단일 함수로 중앙화하여 일관성 확보 및 버그 수정.
- **🐛 버그 해결**: 커스텀 검색어가 바로가기 URL에 반영되지 않던 문제를 해결하여 API 호출과 사용자 경험 일치.

### 상세 모달 안정성 강화 (2025-10-14)
- **🔄 실시간 데이터 동기화**: 상세 모달이 열린 상태에서 태그, 메모 등을 수정해도 UI가 즉시 업데이트되도록 상태 동기화 로직 추가.
- **🔧 타입 안정성 확보**: TypeScript 타입 불일치 및 안전하지 않은 타입 단언 문제를 해결하여 코드 신뢰성 향상.

### API 에러 처리 UX 개선 (2025-10-14)
- **💡 직관적 피드백**: 재고 조회 실패 시 `(에러)` 텍스트 대신 상태 점(dot)을 빨간색으로 변경하여 시각적 피로도 감소.
- **ℹ️ 정보 보존**: API 실패 시에도 과거 재고 데이터를 함께 표시하여 사용자에게 더 풍부한 정보 제공.

### 관리자 시스템 및 계정 관리 (2025-09-15)
- **관리자 권한 시스템**: 이메일 기반의 안전한 관리자 권한 부여.
- **회원탈퇴 기능**: Supabase Admin API를 연동한 2단계 확인 절차로 안전성 강화.
- **Race Condition 버그 수정**: 사용자 설정 생성 시 발생하던 동시성 문제를 해결하여 안정성 확보.

### 사용자 피드백 시스템 (2025-09-15)
- **Supabase Edge Function 연동**: 서버리스 백엔드로 안전하고 확장성 있게 피드백 처리.
- **보안 강화**: 민감한 정보를 환경변수로 분리하여 GitHub 노출 방지.

### 페이지네이션 및 성능 최적화 (2025-09-15)
- **95% 렌더링 성능 향상**: 초기 로딩 시 사용자 설정에 따라 데이터 일부만 표시.
- **사용자 경험 개선**: '전체 보기' 버튼으로 필요시 모든 데이터를 볼 수 있는 유연성 제공.

## 🔗 관련 문서

- **[개발 가이드](docs/DEVELOPMENT.md)** - 개발환경 설정, 아키텍처, 기술 상세 정보
- **[변경 내역](docs/changelog.md)** - 버전별 업데이트 기록

## 🤝 기여하기

프로젝트에 기여하고 싶으시다면 이슈를 통해 버그 리포트나 기능 제안을 해주시거나, Pull Request를 통해 코드 기여를 해주세요.

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.

---
**made by planninghighway 2025**
<!-- 
# 📚 마이북스테이션 (My BookStation) 

**도서 검색 및 도서관 재고 확인 서비스**

알라딘 API와 연동하여 도서를 검색하고, 여러 도서관의 재고 현황을 실시간으로 확인할 수 있는 웹 애플리케이션입니다. 개인 서재 관리 기능을 통해 관심 도서를 체계적으로 관리할 수 있습니다.

![React](https://img.shields.io/badge/React-61DAFB?style=flat-square&logo=react&logoColor=black)
![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?style=flat-square&logo=typescript&logoColor=white)
![Vite](https://img.shields.io/badge/Vite-646CFF?style=flat-square&logo=vite&logoColor=white)
![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=flat-square&logo=supabase&logoColor=white)
![Zustand](https://img.shields.io/badge/Zustand-000000?style=flat-square&logo=zustand&logoColor=white)

## 🎯 서비스 목표

- **원스톱 도서 서비스**: 검색부터 재고 확인, 개인 관리까지 한 곳에서
- **실시간 재고 확인**: 여러 도서관의 재고 상태를 동시에 확인
- **개인화된 서재 관리**: 독서 상태, 별점, 태그, 즐겨찾기 등 체계적인 도서 관리
- **편리한 접근성**: 직관적인 UI/UX로 누구나 쉽게 사용

## ✨ 주요 기능

### 📖 도서 검색
- **알라딘 API 연동**: 제목, 저자, 출판사별 검색 지원
- **검색 결과 필터링**: '[세트]'로 시작하는 도서를 자동으로 제외하여 검색 결과의 정확성 향상
- **상세 정보 제공**: 도서 정보, 가격, ISBN, 전자책 유무, 알라딘 구매 링크 등 상세 정보 표시
- **전자책 보기 버튼**: 알라딘 API에서 전자책 정보가 있을 경우, 책 상세 페이지에 '전자책 보기' 버튼 표시

### 📍 통합 도서 재고 확인
- **실시간 통합 조회**: 종이책(광주 시립도서관), 전자책(경기도 교육청 통합 도서관), 전자책(광주 시립도서관 구독형), 전자책(경기도 전자도서관 API) 재고를 한 번의 요청으로 동시에 확인
- **최적화된 API 호출**: 통합된 서비스 로직을 통해 불필요한 네트워크 요청을 최소화
- **도서관 바로가기**: 재고 확인 셀 클릭 시, 해당 도서관의 도서 검색 결과 페이지로 바로 이동
- **재고 새로고침**: 클릭 한 번으로 최신 재고 상태 업데이트
- **재고 0 표시 통일**: 종이책 및 전자책 재고가 0인 경우 '-' 아이콘과 함께 '0(0)'으로 통일된 표시 방식 적용
- **ISBN 기반 정확도 개선**: 경기도 전자도서관 검색 결과를 ISBN으로 필터링하여 정확한 재고 정보만 표시
- **정보없음 케이스 처리**: 도서관에서 "정보없음" 상태로 반환되는 무효한 데이터를 자동으로 제외하여 정확한 재고 표시

#### 연동 도서관 목록

##### 종이책 (광주 시립도서관)
- **중앙 도서관**: 광주시 중심가 위치
- **송정 도서관**: 광주시 송정동 소재
- **오포 도서관**: 광주시 오포읍 소재
- **퇴촌 도서관**: 광주시 퇴촌면 소재
- **기타 도서관**: 광주시 내 기타 모든 시립도서관

##### 전자책 (경기도 교육청 통합 도서관)
- **성남 도서관**: 경기도교육청 성남교육도서관
- **통합 도서관**: 경기도교육청 통합전자도서관

##### 전자책 (광주 시립도서관 구독형)
- **교보문고 구독형**: 광주 시립도서관에서 제공하는 교보문고 전자책 구독 서비스

##### 전자책 (경기도 전자도서관) - API 방식
- **API 엔드포인트**: `https://ebook.library.kr/api/service/search-engine`
- **요청 방식**: `GET`
- **주요 파라미터**:
    - `contentType=EB`: 전자책 콘텐츠 유형
    - `searchType=all`: 전체 검색
    - `detailQuery=TITLE:{검색어}:true`: 제목 검색 쿼리
    - `sort=relevance`: 관련도순 정렬
    - `page=1&size=20`: 페이징 설정

### 👤 개인 서재 관리
- **내 서재**: 관심 도서를 개인 서재에 저장 및 관리
- **독서 기록**: 읽음 상태(읽지 않음/읽는 중/완독) 및 별점(1-5점) 기록
- **🏷️ 커스텀 태그 시스템**: 사용자 정의 태그 생성/편집/삭제 및 태그 기반 필터링
- **❤️ 좋아하는 책**: 하트 아이콘으로 즐겨찾기 표시 및 좋아하는 책만 필터링
- **🔍 서재 검색**: 제목, 저자별 실시간 검색 기능
- **다양한 정렬 기능**: 추가순, 제목순, 저자순, 출간일순, 별점순, 읽음순 정렬 지원
- **📄 페이지네이션**: 사용자 설정 가능한 기본 보기 건수(25/50/100/200권)로 95% 렌더링 성능 개선
- **대량 작업**: 선택한 도서들의 일괄 태그 변경, 삭제 등 대량 작업 지원
- **데이터 내보내기**: 서재 데이터를 CSV 파일로 내보내기 (날짜 자동 포함)
- **기존 서재 데이터 업데이트**: 누락된 전자책 ISBN13 정보를 자동으로 업데이트

### ⚙️ 맞춤 설정 시스템
- **표시 옵션 설정**: 독서 상태, 별점, 태그, 도서관 재고, 좋아요 아이콘 표시 여부 설정
- **🌙 테마 시스템**: 다크/라이트/시스템 테마 선택
- **📱 모바일 UI 최적화**: 반응형 디자인으로 모든 기기에서 최적화된 경험 제공
- **기본값 설정**: 관리자를 통한 신규 사용자 기본 설정값 관리

### 🔐 사용자 인증 및 계정 관리
- **Google 소셜 로그인**: 간편한 Google 계정 연동
- **이메일 회원가입/로그인**: 이메일과 비밀번호를 통한 전통적인 인증 방식
- **계정 관리**: 비밀번호 변경, 프로필 관리
- **회원탈퇴**: 2단계 확인 절차를 통한 안전한 계정 삭제 (Supabase Admin API 연동)

### 💬 사용자 피드백 시스템
- **의견 보내기**: 프로필 드롭다운에서 간편한 피드백 전송
- **Supabase Edge Function 연동**: 보안 강화된 피드백 처리
- **실시간 입력 제한**: 100자 제한 및 실시간 글자수 표시

### 👨‍💼 관리자 기능
- **관리자 권한 시스템**: 이메일 기반 관리자 권한 관리
- **관리자 전용 기능**:
  - 대량 도서 조회 및 일괄 반영
  - API 테스트 도구
  - 개발 노트 관리
  - 신규 사용자 기본값 설정
- **보안 접근 제어**: 관리자만 접근 가능한 기능 분리

## 🏗️ 기술 스택

### Frontend
- **React 19** - 최신 React 기능 활용
- **TypeScript** - 강력한 타입 시스템으로 안정성 확보
- **Vite** - 빠른 개발 서버 및 빌드 도구
- **Tailwind CSS** - 유틸리티 우선 CSS 프레임워크
- **Lucide React** - 일관된 아이콘 시스템으로 전체 UI 통일

### State Management
- **Zustand** - 경량화된 상태 관리 라이브러리
- **분리된 스토어 구조**: 인증(Auth), 도서(Book), UI, 설정(Settings) 상태별 관리

### Backend & Database
- **Supabase** - 백엔드 서비스 및 PostgreSQL 데이터베이스
- **Supabase Edge Functions** - 서버리스 백엔드 로직 (피드백 처리)
- **Cloudflare Workers** - 도서관 재고 크롤링을 위한 서버리스 백엔드
- **Vercel Serverless Functions** - Aladin API 프록시 처리
- **실시간 동기화** - 서재 데이터의 실시간 저장 및 동기화

### Data Validation
- **Zod** - 런타임 타입 검증으로 외부 API 응답 안정성 확보

## 🚀 빠른 시작

### 필수 조건
- Node.js 18 이상
- Git

### 설치 및 실행

1. **저장소 클론**
   ```bash
   git clone <repository-url>
   cd my_bookstation
   ```

2. **의존성 설치**
   ```bash
   npm install
   ```

3. **환경 변수 설정**
   ```bash
   # .env.local 파일 생성 및 설정
   VITE_SUPABASE_URL=your_supabase_url
   VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
   ALADIN_TTB_KEY=your_aladin_ttb_key
   ```

4. **개발 서버 실행**
   ```bash
   npm run dev
   ```

5. **브라우저에서 확인**
   ```
   http://localhost:5173
   ```

## 📖 사용법

### 기본 사용 흐름
1. **로그인**: 메인 화면 우측 상단의 '로그인' 또는 '회원가입' 버튼을 통해 계정을 관리합니다.
2. **도서 검색**: 메인 화면의 검색창에서 검색 유형('전체', '제목' 등)을 선택하고, 찾고 싶은 키워드를 입력한 후 검색 아이콘을 클릭합니다.
3. **도서 선택**: 검색 결과가 팝업 창에 나타나면, 원하는 **도서를 클릭**하여 선택합니다.
4. **재고 확인**: 선택한 도서의 상세 정보와 **여러 도서관의 재고 현황**이 화면 중앙에 표시됩니다.
5. **서재 관리**: **'내 서재에 추가'** 버튼을 눌러 관심 도서를 하단의 '내 서재' 목록에 저장합니다.

### 내 서재 기능
- **도서 추가/삭제**: 관심 도서를 쉽게 추가하고 삭제
- **읽음 상태 관리**: '읽지 않음', '읽는 중', '완독' 상태로 독서 진행도 관리
- **별점 평가**: 1점~5점 별점으로 개인적인 평가 기록
- **🏷️ 커스텀 태그**: 개인화된 태그 생성 및 태그별 필터링
- **❤️ 좋아하는 책**: 하트 아이콘으로 즐겨찾기 표시 및 필터링
- **🔍 검색 기능**: 제목, 저자별 실시간 검색
- **정렬 옵션**: 추가순, 제목순, 저자순, 출간일순, 별점순, 읽음순으로 정렬
- **📄 페이지네이션**: 25/50/100/200권 단위로 보기 건수 설정
- **대량 작업**: 선택한 도서들의 일괄 태그 변경, 삭제 등
- **CSV 내보내기**: 서재 데이터를 CSV 파일로 내보내기 (파일명에 날짜 자동 포함)

### 맞춤 설정
- **표시 옵션**: 독서 상태, 별점, 태그, 도서관 재고, 좋아요 아이콘 표시 여부 설정
- **테마 설정**: 다크/라이트/시스템 테마 선택
- **기본 보기 건수**: 25/50/100/200권 중 선택

### 도서관 재고 확인
- **실시간 조회**: 여러 도서관의 재고를 동시에 확인
- **바로가기 링크**: 각 도서관 셀 클릭 시 해당 도서관 검색 페이지로 이동
- **재고 새로고침**: 최신 재고 상태로 업데이트

## 🚀 최신 기술적 개선사항

### 관리자 시스템 및 계정 관리 (2025-09-15)
개발자 도구를 관리자 시스템으로 전환하고 계정 관리 기능을 대폭 강화했습니다.

**🔧 주요 개선사항**:
- **관리자 권한 시스템**: 이메일 기반 관리자 권한 관리
- **플로팅 버튼 제거**: 프로필 드롭다운 메뉴에 관리자 기능 통합
- **회원탈퇴 기능**: 2단계 확인 절차 및 Supabase Admin API 연동
- **Race Condition 버그 수정**: 사용자 설정 생성 시 동시성 문제 해결

### 사용자 피드백 시스템 (2025-09-15)
보안 강화된 피드백 시스템을 완전 구현했습니다.

**💬 주요 기능**:
- **Supabase Edge Function 연동**: 서버리스 백엔드 처리
- **보안 강화**: 환경변수 분리로 GitHub 노출 방지
- **UI 통합**: 프로필 드롭다운 "의견 보내기" 메뉴
- **사용자 경험**: 100자 제한, 실시간 글자수, ESC 키 지원

### 페이지네이션 및 성능 최적화 (2025-09-15)
대용량 서재 데이터 처리를 위한 성능 최적화를 구현했습니다.

**⚡ 성능 개선**:
- **95% 렌더링 성능 향상**: 초기 로딩 시 설정된 개수만 표시
- **사용자 설정**: 25/50/100/200권 기본 보기 건수 선택
- **Grid View 최적화**: O(1) 성능의 사전 계산 룩업 테이블
- **완전한 그리드 행**: UI 일관성을 위한 불완전 행 제외

### 좋아하는 책 기능 (2025-09-14)
사용자 경험을 향상시키는 즐겨찾기 시스템을 구현했습니다.

**❤️ 주요 기능**:
- **하트 아이콘 오버레이**: 책 썸네일에 좋아요 표시
- **필터링 기능**: 좋아하는 책만 모아보기
- **모바일 UI 개선**: 2줄 레이아웃으로 모바일 최적화
- **낙관적 업데이트**: 즉시 반응하는 UI 업데이트

### 태그 시스템 완전 구현 (2025-09-14)
개인화된 도서 분류를 위한 태그 시스템을 완성했습니다.

**🏷️ 핵심 기능**:
- **커스텀 태그**: 사용자 정의 태그 생성/편집/삭제
- **색상 시스템**: Primary/Secondary 두 가지 색상으로 단순화
- **대량 태그 변경**: 선택한 도서들의 일괄 태그 수정
- **태그 마이그레이션**: 기존 사용자 태그 자동 변환

**💡 기술적 구현**:
```typescript
// 태그 색상 마이그레이션
const migrateTagColors = (tags: CustomTag[]): CustomTag[] => {
  return tags.map(tag => ({
    ...tag,
    color: tag.color === 'primary' || tag.color === 'secondary'
      ? tag.color
      : 'primary'  // 기존 색상들을 primary로 변환
  }));
};
```

### ISBN 기반 필터링 시스템 (2025-01-09)
경기도 전자도서관 검색 결과의 정확도를 대폭 향상시켰습니다.

**📊 개선 효과**:
- "내 손으로, 시베리아 횡단열차": 4(3) → 1(0) - 75% 정확도 향상
- 제목 유사 도서 제외로 정확한 재고 정보만 표시
- 종이책 ISBN과 전자책 ISBN 모두 매칭 지원

**🔧 기술적 구현**:
```typescript
// ISBN 정규화 및 매칭
const normalizedIsbn1 = isbn1.replace(/[-\s]/g, '');
const normalizedIsbn2 = isbn2.replace(/[-\s]/g, '');
return normalizedIsbn1 === normalizedIsbn2;

// 필터링된 결과로 정확한 카운트 제공
const matchedBooks = gyeonggiResult.books?.filter(ebookResult =>
  isBookMatched(book, ebookResult)
);
```

### 종이책 재고 정확성 개선 (2025-01-10)
도서관 API의 "정보없음" 응답을 올바르게 처리하여 재고 표시 정확도를 개선했습니다.

**🛠️ 문제 해결**:
- 기존: "네이비씰 균형의 기술" 기타lib 1(0) (잘못된 표시)
- 개선: "네이비씰 균형의 기술" 기타lib 0(0) (정확한 표시)

**💡 핵심 로직**:
```typescript
availability.forEach(item => {
  const libraryName = item['소장도서관'];
  // "정보없음" 케이스 필터링
  if (libraryName === '정보없음' || libraryName === '알 수 없음' || !libraryName) {
    return; // 이 항목은 카운트하지 않음
  }
  // ... 정상 카운트 로직
});
```

### 구독형 크롤링 시스템 (2025-01-09)
경기도 전자도서관의 구독형 전자책 크롤링 로직을 완전히 안정화했습니다.

**📊 개선 효과**:
- 동적 인증 토큰 생성으로 API 접근 안정성 향상
- KST 기준 시간 처리로 인증 실패 문제 해결
- 로컬 환경과 Cloudflare Workers 환경 호환성 확보

**🔧 핵심 기술적 구현**:

1. **동적 인증 토큰 생성 시스템**
```javascript
// KST (UTC+9) 기준 현재 시간으로 동적 토큰 생성
const now = new Date(new Date().getTime() + 9 * 60 * 60 * 1000);
const timestamp = `${yyyy}${mm}${dd}${hh}${min}`;
const tokenString = `${timestamp},0000000685`;

// 환경별 Base64 인코딩 처리
const dynamicToken = typeof btoa !== 'undefined'
  ? btoa(tokenString)  // Cloudflare Workers
  : Buffer.from(tokenString).toString('base64'); // Node.js 로컬
```

2. **필수 헤더 구성**
```javascript
const headers = {
  'Content-Type': 'application/json;charset=UTF-8',
  'token': dynamicToken, // 동적 생성된 인증 토큰
  'Referer': 'https://ebook.library.kr/', // 출처 검증
  'User-Agent': 'Mozilla/5.0 ...' // 브라우저 위장
};
```

## 🔗 관련 문서

- **[개발 가이드](docs/DEVELOPMENT.md)** - 개발환경 설정, 아키텍처, 기술 상세 정보
- **[변경 내역](docs/changelog.md)** - 버전별 업데이트 기록
- **[에러 로그](docs/error_log.md)** - 문제점 및 해결 방법
- **[작업 목록](docs/task_list.md)** - 진행 상황 및 계획

## 🤝 기여하기

프로젝트에 기여하고 싶으시다면:

1. 이슈를 통해 버그 리포트나 기능 제안
2. Pull Request를 통한 코드 기여
3. 문서 개선 및 번역

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.

---

**마지막 업데이트**: 2025-09-15
**버전**: v2.0.0

---

**made by planninghighway 2025**

---

**주요 개선사항 요약**:
- 🏷️ **커스텀 태그 시스템으로 개인화된 도서 분류**
- ❤️ **좋아하는 책 기능으로 즐겨찾기 관리**
- ⚙️ **맞춤 설정 시스템으로 개인화된 사용자 경험**
- 👨‍💼 **관리자 시스템으로 전환된 고급 관리 기능**
- 💬 **보안 강화된 사용자 피드백 시스템**
- 📄 **페이지네이션으로 95% 성능 향상**
- 🔐 **2단계 확인 회원탈퇴 및 계정 관리**
- 📊 **ISBN 필터링으로 재고 정확도 75% 향상**
- 🛠️ **Race Condition 버그 완전 해결**
- 🚀 **Vercel Serverless Function으로 API 프록시 안정화**

-->