# 변경 내역 (Changelog)

*모든 시간은 KST(UTC+9) 기준입니다.*

---

### **v2.1.0** (2025-10-25)

#### 🐛 버그 수정 및 안정성 향상
- **`Fix(Store)` 검색/필터링된 책의 상태 업데이트 버그 해결**: '내 서재'에서 검색이나 태그 필터를 통해 표시된 책(초기 로딩에 포함되지 않은)에 대해 '좋아요', 태그 추가/삭제 등의 기능이 동작하지 않던 문제를 해결했습니다. 모든 데이터 소스를 포괄적으로 조회하는 `getBookById` 함수를 사용하도록 수정하여 안정성을 확보했습니다. (`851abdb`)
- **`Fix(Store)` API 실패 시 데이터 유실 방지 로직 강화**: API 응답이 `undefined`나 빈 객체일 경우, 기존 재고 정보가 유실되는 심각한 버그를 수정했습니다. '새로운 데이터가 없으면 기존 데이터를 유지한다'는 규칙을 모든 도서관 정보에 일관되게 적용하여 데이터 복원력을 크게 향상시켰습니다. (`b303898`)
- **`Fix(Store)` API 부분 실패 시 데이터 초기화 버그 수정**: 여러 도서관 중 일부만 조회 실패했을 때, 실패한 도서관의 재고가 `0/0`으로 초기화되지 않고 기존 DB 값을 유지하도록 `refreshBookInfo` 로직을 개선했습니다. (`36aa1ca`)
- **`Fix(API)` `customTitle` 처리 오류 수정**: 재고 조회 API 요청 시 `customTitle`이 `null`로 반환되는 문제를 해결하여 API 응답의 일관성을 확보했습니다. (`e7b644f`)

#### 🎨 UI/UX 개선
- **`Fix(UI)` 상세 모달의 긴 제목 줄 바꿈 처리**: 매우 긴 책 제목이 상세 모달의 레이아웃을 깨뜨리는 문제를 해결하기 위해, 제목을 최대 2줄로 제한하고 말줄임표로 처리하도록 수정했습니다. (`40f31f7`)
- **`Refactor(UX)` "조회중..." 무한 루프 버그 해결**: API 조회 실패 시 상세 모달에서 "조회중..." 상태가 무한히 표시되던 버그를 해결했습니다. `null`(값 없음)과 `undefined`(로딩 전) 상태를 명확히 구분하여 UI 안정성을 높였습니다. (`8ddd742`)
- **`Fix(UI)` 그리드 뷰 레이아웃 오류 수정**: 책 제목이 길 경우 그리드 뷰의 특정 열만 넓어지던 문제를 해결하여, 모든 열이 균등한 너비를 유지하도록 수정했습니다. (`ac86da5`)

#### ⚡ 성능 최적화
- **`Feature(Perf)` Cloudflare Cache API 도입**: `POST` 요청에 대한 재고 확인 API 응답을 2시간 동안 캐싱하는 기능을 도입했습니다. 이를 통해 반복 요청 시 응답 속도를 비약적으로 향상시키고 외부 API 부하를 줄였습니다. (`b14ec89`)

#### 🛠️ 리팩토링 및 코드 품질 개선
- **`Refactor(API)` 저자명 기반 재고 필터링 기능 제거**: 도서관별 저자명 표기 불일치로 인해 오히려 정확도를 낮추던 저자명 필터링 기능을 백엔드에서 제거하여, 재고 누락 문제를 해결하고 로직을 단순화했습니다. (`6a4656d`)
- **`Refactor(Data)` 데이터 파이프라인 안정성 강화**: `lastUpdated` 타임스탬프를 도입하여 데이터의 최신 기준 시점을 명확히 하고, 관련 데이터 흐름을 일관되게 리팩토링했습니다. (`9345ce3`)
- **`Refactor(Modal)` 상세 모달 'API' 버튼 기능 복원**: 디버깅용 'API' 버튼이 불필요하게 실시간 API를 호출하던 동작을, 원래 의도대로 DB에 저장된 `book_data` JSON을 조회하도록 복원했습니다. (`2ade7f2`)

---

### **v2.0.0** (2025-10-14)

#### ✨ 주요 기능
- **`Feature(Search)` 커스텀 검색어 기능 추가**: 사용자가 도서관 재고 조회 시 직접 검색어를 지정하여 조회 정확도를 높일 수 있도록 `MyLibraryBookDetailModal`에 편집 UI 및 저장 로직을 구현했습니다. (`fa68eef`, `bb9d894`)

#### 🐛 버그 수정 및 안정성 향상
- **`Fix(UI)` 상세 모달 데이터 동기화**: 모달이 열린 상태에서 태그, 메모 등 CRUD 작업 시 UI가 실시간으로 업데이트되지 않던 문제를 해결했습니다. (`eab6714`)
- **`Fix(UI)` 상세 모달 UI 복원**: 리팩토링 중 누락되었던 도서 상세 정보(표지, 제목 등) UI를 복원했습니다. (`c182749`)

#### 🛠️ 리팩토링 및 코드 품질 개선
- **`Refactor(URL)` URL 생성 로직 중앙화**: 여러 컴포넌트에 흩어져 있던 도서관 링크 생성 로직을 `unifiedLibrary.service.ts`의 `createLibraryOpenURL` 함수로 통합하고, 커스텀 검색어 미반영 버그를 수정했습니다. (`385ae70`)
- **`Refactor(Code)` 타입 안정성 강화**: `useBookStore`의 타입 불일치 문제 및 안전하지 않은 타입 단언(`as Json`)을 수정하여 프로젝트 전반의 타입 안정성을 높였습니다. (`eab6714`)

---

### **v1.9.0** (2025-10-14)

#### ✨ 주요 기능
- **`Feature(Search)` 키워드 통합 검색 기능**: 단일 키워드로 여러 도서관의 자료를 한 번에 검색하는 `KeywordSearchModal` 기능을 구현하고, Cloudflare Worker에 `/keyword-search` 엔드포인트를 추가했습니다. (`a237f31`, `6c32177`)

#### 🎨 UI/UX 개선
- **`Refactor(UI)` API 에러 표시 방식 개선**: 재고 조회 실패 시 `(에러)` 텍스트 대신 상태 점(dot) 색상으로 상태를 표시하여 UX를 개선했습니다. 실패 시에도 과거 재고 정보를 함께 보여줍니다. (`3bbc970`)

#### 🐛 버그 수정 및 안정성 향상
- **`Fix(API)` 경기도 전자도서관 조회 안정성 향상**: 소장/구독 API가 모두 실패했을 때만 에러로 처리하여 부분적인 성공이라도 결과를 반환하도록 수정했습니다. (`b95e7b7`)
- **`Fix(Bug)` 주요 버그 수정**: 외부 링크 클릭 시 서재 상태 초기화 문제(`66ae8fe`), 상세 모달에서 퇴촌도서관 링크 누락 문제(`0cc121b`) 등을 해결했습니다.

#### ⚡ 성능 최적화
- **`Performance(API)` API 응답 속도 개선**: Cloudflare Worker의 외부 요청 타임아웃을 15초로 통일 및 최적화하여 평균 API 응답 속도를 개선했습니다. (`f2311b6`, `3de2981`, `2d517ba`)

---

### **v1.8.0** (2025-10-11)

#### ✨ 주요 기능
- **`Feature(Admin)` 일괄 재고 갱신 기능**: 내 서재의 책 재고를 한 번에 업데이트하는 기능을 추가했습니다. 진행 상태 표시 및 일시정지/취소 기능을 포함합니다. (`661e709`)

#### 🐛 버그 수정 및 데이터 관리
- **`Fix(Data)` CSV 내보내기 오류 수정**: 페이지네이션 상태와 무관하게 항상 DB의 전체 서재 데이터를 내보내도록 수정했습니다. (`a50bc20`)
- **`Fix(Data)` 메모 저장/로드 문제 해결**: 메모가 DB에 올바르게 저장되고, 필터링된 뷰에서도 즉시 UI에 반영되도록 수정했습니다. (`2c487b5`)
- **`Fix(Admin)` 일괄 갱신 범위 오류 수정**: DB의 전체 책 수를 기준으로 갱신 범위가 표시되도록 수정했습니다. (`431d98b`)

#### 🛠️ 리팩토링
- **`Refactor(API)` 백엔드 API 네이밍 및 로직 개선**: Cloudflare Worker의 함수명과 요청 파라미터를 명확하게 변경하고, 검색어 처리 로직을 구조화했습니다. (`e994c01`, `76b6a5b`)
- **`Refactor(API)` 재고 정확도 개선**: 경기도 교육청 전자책의 ISBN을 크롤링하고, 저자명 비교 로직을 개선하여 매칭 정확도를 높였습니다. (`9490659`)

---

### **v1.7.0** (2025-10-11)

#### ✨ 주요 기능
- **`Feature(Search)` 서버 기반 내 서재 검색/필터링**:
  - 내 서재 검색 기능을 DB 기반으로 전환하여 페이지네이션과 무관하게 전체 서재를 대상으로 정확한 검색을 제공합니다. (`0e4548d`)
  - 태그 필터링 기능 또한 서버(DB) 기반으로 전환하여 정확도를 개선했습니다. (`9566120`)

#### ⚡ 성능 최적화
- **`Performance(Loading)` 내 서재 초기 로딩 성능 개선**: 사용자 설정에 따라 초기 데이터를 부분 로딩(페이지네이션)하여 렌더링 성능을 95% 향상시켰습니다. (`1917ae6`, `412ded0`)

#### 🐛 버그 수정
- **`Fix(UI)` 페이지네이션 관련 UI 버그 수정**: 총 책 권수 표시 오류 및 홈 리셋 시 '전체 보기' 버튼이 미표시되던 문제를 해결했습니다. (`75d67f0`)

---

### **v1.6.0** (2025-09-20)

#### ✨ 주요 기능
- **`Feature(Search)` 알라딘 API 페이지네이션**: 도서 검색 결과 모달에 '더 많은 책 보기' 기능을 추가했습니다. (`c897daa`)
- **`Feature(Note)` 한 줄 메모 기능**: 책별로 최대 50자의 간단한 메모를 기록하고 수정하는 기능을 구현했습니다. (`36c6629`, `b0d8330`)
- **`Feature(Search)` 저자별 개별 검색**: 저자 이름을 클릭하여 해당 저자의 책만 검색/필터링하는 기능을 추가했습니다. (`9e1fdb4`)
- **`Feature(UX)` 홈 버튼 완전 리셋 기능**: 홈 버튼 클릭 시 모든 필터, 정렬, 검색 상태를 초기화하는 전역 리셋 기능을 구현했습니다. (`09f9525`)
- **`Feature(Admin)` 관리자 기능 및 계정 관리**:
  - 이메일 기반 관리자 시스템, 회원탈퇴 기능, 사용자 피드백 시스템 등 고급 기능들을 대거 구현했습니다. (`5f8506d`, `cbdf3d4`, `b13e49f`, `34fe6e6`)
  - 관리자가 신규 사용자의 기본 설정값(표시 옵션, 기본 태그 등)을 관리하는 기능을 추가했습니다. (`02650a0`, `ee147cd`)
- **`Feature(Auth)` 프로필 드롭다운 메뉴 통합**: 여러 인증 관련 버튼을 하나의 드롭다운 메뉴로 통합하여 UI를 개선했습니다. (`1d866e1`)

#### ⚙️ 개발 환경
- **`CI/CD` Cloudflare Worker 자동 배포**: GitHub Actions를 설정하여 `library-checker` 디렉토리 변경 시 자동으로 배포되도록 파이프라인을 구축했습니다. (`759bf63` 및 관련 커밋)

---

### **v1.5.0** (2025-09-14)

#### ✨ 주요 기능
- **`Feature(Favorites)` '좋아하는 책' 기능 구현**: 책에 하트 아이콘으로 즐겨찾기를 표시하고 필터링하는 기능을 추가했습니다. (`3134f40`)
- **`Feature(Tag)` 커스텀 태그 시스템 구현**:
  - 사용자 정의 태그를 생성, 수정, 삭제하는 기능을 완성했습니다. (`f34aaf7`)
  - 여러 책을 선택하여 태그를 일괄 적용/제거하는 기능을 구현했습니다.
  - 대량 태그 변경 시 성능을 최적화하고 진행 상태를 표시합니다. (`ae05df6`)

#### 🎨 UI/UX 개선
- **`Refactor(UI)` 내 서재 UI/UX 대폭 개선**:
  - 모바일 환경에서 툴바를 2줄 레이아웃으로 변경하여 사용성을 높였습니다. (`3134f40`)
  - 그리드 뷰 체크박스 클릭 오류 등 다수의 UI 버그를 수정하고 디자인 일관성을 확보했습니다. (`7d0e7c6`, `dc626f4`)
- **`Refactor(Code)` 상태 관리 로직 리팩토링**: `useBookStore`의 중복 로직을 `updateBookInStoreAndDB` 헬퍼 함수로 통합하여 코드 품질을 향상시켰습니다. (`5cfaa4c`)

---

### **v1.4.0** (2025-09-13)

#### ✨ 주요 기능
- **`Feature(Admin)` 대량 도서 조회 및 일괄 반영**: 관리자가 여러 책 제목을 입력하여 한 번에 검색하고 서재에 반영하는 기능을 추가했습니다. (`2ac7815`)
- **`Feature(Search)` 내 서재 실시간 검색**: 내 서재 내에서 제목, 저자명으로 실시간 검색하는 기능을 구현했습니다. (`2a1da63`)
- **`Feature(Settings)` 사용자 맞춤 설정**: UI 요소(완독여부, 별점 등) 표시 여부를 사용자가 직접 설정하고 DB에 저장하는 기능을 구현했습니다. (`a70334b`)

#### 🎨 UI/UX 개선
- **`Refactor(UI)` 전문 테마 시스템 도입**: OKLCH 색 공간 기반의 테마 시스템을 도입하고 라이트 모드 가독성을 대폭 개선했습니다. (`95d38fe`)
- **`Refactor(Admin)` 플로팅 개발자 도구**: 기존 API 테스트 기능을 플로팅 모달 형태의 개발자 도구로 개편했습니다. (`7541349`)

---

### **v1.3.0** (2025-09-12)

- **`Feature(API)` Aladin API 프록시 구현**: Vercel Serverless Function을 이용해 API 키를 서버 측에 안전하게 보관하도록 수정했습니다. (`c832982`)

---

### **v1.2.0** (2025-08-12)

- **`Feature(API)` 시립 전자책 재고 표시 기능 추가**: 상세 모달에 광주 시립 도서관의 소장형 및 구독형 전자책 재고를 표시하는 기능을 구현했습니다. (`f30b13d`)
- **`Fix(API)` 백엔드 파싱 로직 개선**: 시립도서관(소장형) 대출 현황 파싱 오류를 수정하고, API 응답 구조를 개선하여 프론트엔드 연동 문제를 해결했습니다. (`d788eb3`, `43634c1`)
- **`Refactor(UI)` 카드 뷰 전환**: 내 서재의 테이블 뷰를 반응형 카드/그리드 뷰로 전면 개편하여 사용자 경험을 대폭 개선했습니다. (`f6ca577`)

---

### **v1.1.0** (2025-08-11)

- **`Feature(UX)` 자동 재고 조회**: 내 서재에 책 추가 시 백그라운드에서 자동으로 재고 조회를 실행하도록 하여 사용자 대기 시간을 최소화했습니다. (`9e5fe57`)
- **`Feature(Performance)` 렌더링 성능 최적화**: ISBN 매칭 로직을 렌더링 시점이 아닌 데이터 갱신 시점에 수행하도록 변경하여 렌더링 성능을 70-90% 향상시켰습니다. (`6801a40`)
- **`Fix(Bug)` 퇴촌도서관 방화벽 문제 해결**: 상세페이지 직접 접근 대신 검색 결과 페이지로 우회하도록 링크 방식을 수정했습니다. (`b81576c`)

---

### **v1.0.0** (2025-08-01 ~ 2025-08-09)

- **`Initial Release`**: 프로젝트 초기 버전 릴리즈.
- **`Feature`**:
  - 알라딘 API 연동 도서 검색 기능.
  - Supabase 연동 개인 서재 관리 (추가/삭제).
  - 3-Way 통합 도서관(광주 종이책, 경기도 교육청 전자책) 실시간 재고 확인. (`dcc9469`, `ca1f529`)
  - 내 서재 정렬(추가순, 제목순 등), CSV 내보내기 기능.
  - 독서 활동 기록(읽음 상태, 별점) 기능.
- **`Refactor`**:
  - `useContext`에서 `Zustand`로 상태 관리 라이브러리 전환. (`v0.5.0`)
  - `Zod`를 도입하여 외부 API 응답 데이터 유효성 검증 강화. (`v0.6.0`)
- **`Auth`**:
  - Google 소셜 로그인 및 이메일/비밀번호 인증 방식 구현. (`v0.4.0`)

---
*문서 최종 수정일: 2025-10-15*