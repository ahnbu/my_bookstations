# Library Checker - Cloudflare Workers

ë§ˆì´ë¶ìŠ¤í…Œì´ì…˜ í”„ë¡œì íŠ¸ì˜ í†µí•© ë„ì„œê´€ ì¬ê³  í™•ì¸ APIë¥¼ ìœ„í•œ Cloudflare Workersì…ë‹ˆë‹¤.

## ğŸ“‹ ê¸°ëŠ¥

- ê²½ê¸°ê´‘ì£¼ ì‹œë¦½ë„ì„œê´€ ì¢…ì´ì±… ì¬ê³  í™•ì¸
- ê²½ê¸°ë„êµìœ¡ì²­ ì „ìì±… ì¬ê³  í™•ì¸ (ì„±ë‚¨/í†µí•©ë„ì„œê´€)
- ê²½ê¸°ë„ ì „ìë„ì„œê´€ ì „ìì±… ì¬ê³  í™•ì¸
- Supabase ë¬´ë£Œìš”ê¸ˆì œ ìœ ì§€ë¥¼ ìœ„í•œ Keep-Alive ê¸°ëŠ¥ (3ì¼ë§ˆë‹¤ ì‹¤í–‰)

## ğŸš€ ë¡œì»¬ ê°œë°œ í™˜ê²½ ì„¤ì •

### 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.dev.vars` íŒŒì¼ì„ ìƒì„±í•˜ê³  Supabase ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”:

```bash
# .dev.vars
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
```

### 2. ë¡œì»¬ ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
# ê°œë°œ ì„œë²„ ì‹œì‘ (í¬íŠ¸ 8787)
npm run dev

# ë˜ëŠ” íŠ¹ì • í¬íŠ¸ë¡œ ì‹¤í–‰
wrangler dev --test-scheduled --port 8787
```

### 3. API í…ŒìŠ¤íŠ¸

**ê¸°ë³¸ ìƒíƒœ í™•ì¸:**
```bash
curl -X GET "http://127.0.0.1:8787"
```

**ë„ì„œ ê²€ìƒ‰ í…ŒìŠ¤íŠ¸:**
```bash
curl -X POST "http://127.0.0.1:8787" \
  -H "Content-Type: application/json" \
  -d '{"isbn": "9788934985822", "title": "ì•„ëª¬ë“œ", "gyeonggiTitle": "ì•„ëª¬ë“œ"}'
```

## ğŸ“ ì‚¬ìš©ë²•

### API ì—”ë“œí¬ì¸íŠ¸

- **ë©”ì„œë“œ**: `POST`
- **URL**: `http://127.0.0.1:8787` (ë¡œì»¬) ë˜ëŠ” `https://library-checker.byungwook-an.workers.dev` (í”„ë¡œë•ì…˜)
- **Content-Type**: `application/json`

### ìš”ì²­ í˜•ì‹

```json
{
  "isbn": "9788934985822",
  "title": "ì•„ëª¬ë“œ",
  "gyeonggiTitle": "ì•„ëª¬ë“œ"
}
```

### ì‘ë‹µ í˜•ì‹

```json
{
  "gwangju_paper": {
    "book_title": "ë„ì„œ ì œëª©",
    "availability": [
      {
        "ì†Œì¥ë„ì„œê´€": "ê´‘ì£¼ì‹œë¦½ì¤‘ì•™ë„ì„œê´€",
        "ì²­êµ¬ê¸°í˜¸": "813.6-ì†Œ32ì•„",
        "ê¸°ë³¸ì²­êµ¬ê¸°í˜¸": "813.6-ì†Œ32ì•„",
        "ëŒ€ì¶œìƒíƒœ": "ëŒ€ì¶œê°€ëŠ¥",
        "ë°˜ë‚©ì˜ˆì •ì¼": "-"
      }
    ]
  },
  "gyeonggi_ebooks": [
    {
      "ì†Œì¥ë„ì„œê´€": "ì„±ë‚¨ë„ì„œê´€",
      "ë„ì„œëª…": "ì•„ëª¬ë“œ",
      "ì €ì": "ì†ì›í‰",
      "ì¶œíŒì‚¬": "ì°½ë¹„",
      "ë°œí–‰ì¼": "2017-03-31",
      "ëŒ€ì¶œìƒíƒœ": "ëŒ€ì¶œê°€ëŠ¥"
    }
  ],
  "gyeonggi_ebook_library": {
    "library_name": "ê²½ê¸°ë„ ì „ìë„ì„œê´€",
    "total_count": 1,
    "available_count": 1,
    "unavailable_count": 0,
    "owned_count": 1,
    "subscription_count": 0,
    "books": [
      {
        "type": "ì†Œì¥í˜•",
        "title": "ì†Œì¥í˜• ì „ìì±…",
        "status": "ëŒ€ì¶œê°€ëŠ¥"
      }
    ]
  }
}
```

## ğŸ”§ ê°œë°œì ì •ë³´

### í”„ë¡œì íŠ¸ êµ¬ì¡°

```
library-checker/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.js          # ë©”ì¸ Workers ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ wrangler.jsonc        # Workers ì„¤ì •
â”œâ”€â”€ package.json          # ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ .dev.vars            # ë¡œì»¬ ê°œë°œìš© í™˜ê²½ ë³€ìˆ˜
â”œâ”€â”€ .env.example         # í™˜ê²½ ë³€ìˆ˜ ì˜ˆì œ
â””â”€â”€ README.md            # ì´ íŒŒì¼
```

### ì£¼ìš” ê¸°ëŠ¥

- **CORS ì§€ì›**: ëª¨ë“  ë„ë©”ì¸ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥
- **ì—ëŸ¬ ì²˜ë¦¬**: ê° ë„ì„œê´€ë³„ ê°œë³„ ì—ëŸ¬ ì²˜ë¦¬
- **íƒ€ì„ì•„ì›ƒ**: 20-25ì´ˆ íƒ€ì„ì•„ì›ƒìœ¼ë¡œ ì•ˆì •ì„± í™•ë³´
- **ìŠ¤ì¼€ì¤„ëœ ì‘ì—…**: Supabase Keep-Alive (3ì¼ë§ˆë‹¤ ì‹¤í–‰)

### ë°°í¬

```bash
# í”„ë¡œë•ì…˜ ë°°í¬
npm run deploy
```

## ğŸ”„ í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™

React ì•±ì˜ `services/unifiedLibrary.service.ts`ì—ì„œ ìë™ìœ¼ë¡œ ë¡œì»¬/í”„ë¡œë•ì…˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì„ íƒí•©ë‹ˆë‹¤:

- **ê°œë°œ í™˜ê²½**: `http://127.0.0.1:8787`
- **í”„ë¡œë•ì…˜ í™˜ê²½**: `https://library-checker.byungwook-an.workers.dev`

## ğŸ“Š ëª¨ë‹ˆí„°ë§

Wrangler Dashboardì—ì„œ ì‹¤ì‹œê°„ ë¡œê·¸ì™€ ì„±ëŠ¥ ì§€í‘œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```bash
wrangler tail
```

---

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-08-09*